<%- include('partials/header'); %>
<main>
    <div class="container-fluid">
        <h1 class="mt-4">Dashboard</h1>
        <ol class="breadcrumb mb-4">
            <li class="breadcrumb-item active">Dashboard</li>
        </ol>


        <% if (positions) { %>
        <div class="row" style="justify-content: center;">
            <% for( let i = 0; i < positions.length; i++ ) { %>
            <div class="col-lg-6">
                <div class="card mb-4">
                    <div class="card-header">
                        <i class="fas fa-chart-pie mr-1"></i>
                        <%= positions[i].name %> Analytics
                    </div>
                    <div class="card-body"><canvas id="<%= positions[i]._id %>" width="100%" height="50"></canvas></div>
                </div>
            </div>
            <% } %>
        </div>
        <% } %>

        <div class="card mb-4">
            <div class="card-header">
                <i class="fas fa-table mr-1"></i>
                <span id="fileName">Election Results</span>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Matric Number</th>
                                <th>Post</th>
                                <th>Votes</th>
                            </tr>
                        </thead>
                        <tfoot>
                            <tr>
                                <button type="button" id="pdf-btn" class="btn btn-danger m-2 mb-2">To PDF</button>
                            </tr>
                            <tr>
                                <button type="button" id="csv-btn" class="btn btn-success m-2 mb-2">To CSV</button>
                            </tr>
                        </tfoot>
                        <tbody>
                            <% electionDetails.forEach(candidate => { %>
                            <tr>
                                <td><%= candidate.name %></td>
                                <td><%= candidate.matNo %></td>
                                <td><%= candidate.post %></td>
                                <td><%= candidate.votes %></td>
                            </tr>
                            <% }) %>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</main>
<%- include('partials/footer'); %>